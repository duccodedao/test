<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Mini App</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        /* Style phần header */
        .header {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
        }

        /* Style thanh loading */
        .progress-bar {
            width: 100%;
            background-color: #ddd;
        }

        .progress {
            width: 1%;
            height: 30px;
            background-color: #4caf50;
            text-align: center;
            line-height: 30px;
            color: white;
        }

        /* Style nội dung khi check hoàn thành */
        .content {
            padding: 20px;
            text-align: center;
        }

        .hidden {
            display: none;
        }

        /* Style footer */
        .footer {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #2c3e50;
            color: white;
            display: flex;
            justify-content: space-around;
            padding: 10px;
        }

        .footer div {
            cursor: pointer;
        }

        /* Active button footer */
        .footer .active {
            font-weight: bold;
            color: #f39c12;
        }

        /* Style cho các section nội dung */
        .section {
            display: none;
        }

        #homeSection, #taskSection, #inviteSection {
            display: none;
        }

        .active-section {
            display: block;
        }

        /* Style link mời */
        .invite-container {
            text-align: center;
            padding: 20px;
        }

        .invite-container a {
            color: #2ecc71;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="header">
        <h2>Telegram Mini App</h2>
    </div>

    <div id="checkSection" class="content">
        <h3>Checking your account...</h3>
        <div class="progress-bar">
            <div class="progress" id="progressBar">1%</div>
        </div>
    </div>

    <div id="homeSection" class="section">
        <h3>Welcome to Home</h3>
        <p>Thông tin tài khoản của bạn đã được xác thực thành công!</p>
    </div>

    <div id="taskSection" class="section">
        <h3>Task Section</h3>
        <button onclick="completeTask()">Làm nhiệm vụ</button>
        <p id="taskStatus">Trạng thái nhiệm vụ: Chưa hoàn thành</p>
    </div>

    <div id="inviteSection" class="section invite-container">
        <h3>Invite Friends</h3>
        <p>Chia sẻ link mời bạn bè để nhận 10% token:</p>
        <a id="invite-link" href="" target="_blank">Link mời của bạn</a>
    </div>

    <div class="footer">
        <div id="homeBtn" class="active" onclick="showSection('home')">Home</div>
        <div id="taskBtn" onclick="showSection('task')">Task</div>
        <div id="inviteBtn" onclick="showSection('invite')">Invite</div>
    </div>

    <script>
        // Phần check thông tin và chuyển cảnh
        let progress = 1;
        let progressBar = document.getElementById('progressBar');
        
        function updateProgress() {
            if (progress >= 100) {
                clearInterval(progressInterval);
                // Khi hoàn thành sẽ chuyển cảnh sang mục Home
                document.getElementById('checkSection').classList.add('hidden');
                document.getElementById('homeSection').classList.add('active-section');
            } else {
                progress += 1;
                progressBar.style.width = progress + '%';
                progressBar.innerText = progress + '%';
            }
        }

        let progressInterval = setInterval(updateProgress, 100);

        // Chuyển section khi nhấn footer
        function showSection(section) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active-section'));
            document.getElementById(section + 'Section').classList.add('active-section');

            document.querySelectorAll('.footer div').forEach(btn => btn.classList.remove('active'));
            document.getElementById(section + 'Btn').classList.add('active');
        }

        // Phần nhiệm vụ
        let taskCompleted = false;

        function completeTask() {
            taskCompleted = true;
            document.getElementById('taskStatus').innerText = 'Trạng thái nhiệm vụ: Đã hoàn thành!';
        }

        // Tạo link mời riêng
        function generateInviteLink(username) {
            const inviteLink = `https://yourwebsite.com/invite?ref=${username}`;
            document.getElementById('invite-link').innerText = inviteLink;
            document.getElementById('invite-link').setAttribute('href', inviteLink);
        }

        // Giả sử tên người dùng là 'user123'
        generateInviteLink('user123');
    </script>
</body>
</html>
